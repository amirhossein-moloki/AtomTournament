با توجه به تحلیل دقیقی که روی کدبیس پروژه شما انجام دادم، گزارش کامل نیازمندی‌های سخت‌افزاری برای استقرار این سیستم در محیط Production آماده شده است.

### **۱. خلاصه مشخصات فنی پروژه**

قبل از ارائه پیشنهادها، درک ویژگی‌های کلیدی پروژه که نیازمندی‌های سخت‌افزاری را تعیین می‌کنند، ضروری است:

*   **معماری:** سیستم شما یک معماری مدرن و چندبخشی مبتنی بر Docker دارد که شامل وب سرور Django، دیتابیس PostgreSQL، کش و صف Redis و چندین Worker پردازش پس‌زمینه (Celery) است.
*   **نوع بار کاری (Workload):** پروژه شما یک بار کاری ترکیبی و سنگین دارد:
    *   **پردازشی (CPU-Bound):** به دلیل وجود پردازش تصویر (تبدیل به AVIF)، محاسبات احتمالی (`scikit-learn`) و پاسخگویی به تعداد بالای درخواست‌های API.
    *   **حافظه‌محور (Memory-Bound):** به دلیل استفاده از WebSocket برای چت (Django Channels)، کشینگ گسترده با Redis و مدیریت فرآیندهای متعدد Django و Celery.
    *   **ورودی/خروجی (I/O-Bound):** به دلیل حجم بالای کوئری‌ها به دیتابیس، ذخیره‌سازی فایل‌های مدیا و لاگ‌ها.
*   **مقیاس‌پذیری:** معماری پروژه به گونه‌ای طراحی شده که قابلیت مقیاس‌پذیری بالایی دارد و می‌توان هر بخش (وب، دیتابیس، worker) را به صورت مستقل تقویت کرد.

---

### **۲. جدول پیشنهادی نیازمندی‌های سخت‌افزاری**

در جدول زیر سه سناریو برای سطوح مختلف ترافیک و کاربر ارائه شده است.

| ویژگی              | سناریو ۱: کم‌هزینه (شروع کار)                               | سناریو ۲: متعادل (توصیه شده)                                     | سناریو ۳: حرفه‌ای (مقیاس بالا)                                         |
| ------------------ | ----------------------------------------------------------- | ---------------------------------------------------------------- | ---------------------------------------------------------------------- |
| **CPU**            | **4 vCPU**                                                  | **8 vCPU**                                                       | **16+ vCPU** (یا بیشتر)                                                  |
| **RAM**            | **8 GB**                                                    | **16 GB**                                                        | **32 GB** (یا بیشتر)                                                     |
| **Storage**        | **100 GB NVMe/SSD**                                         | **250 GB NVMe/SSD**                                              | **500+ GB NVMe/SSD** (یا کلاستر دیتابیس)                                 |
| **پهنای باند**     | 1 Gbps                                                      | 1-10 Gbps                                                        | 10+ Gbps                                                               |
| **ترافیک ماهانه**   | ~ 5 TB                                                      | ~ 15 TB                                                          | 30+ TB                                                                 |
| **GPU**            | **نیاز نیست**                                               | **نیاز نیست**                                                    | **نیاز نیست** (مگر اینکه مدل‌های ML اضافه شوند)                          |
| **نوع سرور**       | **Cloud / VPS** (مانند DigitalOcean, Hetzner, Vultr)       | **Cloud / Dedicated Server** (مانند Hetzner Dedicated)           | **زیرساخت ابری (Cloud Infrastructure)** (مانند AWS, GCP, Azure) یا سرورهای اختصاصی متعدد |
| **مثال کاربران همزمان** | ۱۰۰ تا ۵۰۰ کاربر                                           | ۱۰۰۰ تا ۵۰۰۰ کاربر                                                | +۵۰۰۰ کاربر                                                            |

---

### **۳. توضیحات فنی دقیق**

#### **CPU (پردازنده)**

*   **چرا مهم است؟** هر درخواست API، هر پردازش پس‌زمینه توسط Celery (مانند پردازش تصویر) و هر کانکشن WebSocket بار مستقیمی روی CPU ایجاد می‌کند.
*   **توضیح سناریوها:**
    *   **4 vCPU:** برای شروع و مدیریت ترافیک اولیه کافی است، اما با افزایش کاربران و تسک‌های Celery به سرعت به گلوگاه تبدیل خواهد شد.
    *   **8 vCPU (توصیه شده):** این تعداد هسته به شما اجازه می‌دهد تا فرآیندهای وب (Gunicorn)، چندین Worker Celery و دیتابیس را به راحتی و بدون تداخل روی یک سرور اجرا کنید.
    *   **16+ vCPU:** در مقیاس بالا، شما نیاز به هسته‌های بیشتر برای توزیع بار بین سرویس‌های مختلف (Application, Database, Workers) یا حتی اجرای آن‌ها روی سرورهای مجزا خواهید داشت.

#### **RAM (حافظه)**

*   **چرا مهم است؟** RAM در پروژه شما یک منبع حیاتی است. مصرف‌کنندگان اصلی عبارتند از:
    1.  **PostgreSQL:** برای کش کردن کوئری‌ها و داده‌های پراستفاده.
    2.  **Redis:** برای ذخیره داده‌های کش و صف تسک‌ها.
    3.  **Django/Gunicorn:** هر فرآیند وب برای اجرا به حافظه نیاز دارد.
    4.  **Celery Workers:** هر Worker برای نگه‌داری تسک‌ها در حافظه به RAM نیاز دارد.
    5.  **WebSocket Connections:** هر کاربر آنلاین در بخش چت، یک اتصال باز نگه می‌دارد که بخشی از RAM را اشغال می‌کند.
*   **توضیح سناریوها:**
    *   **8 GB:** حداقل میزان لازم برای اجرای تمام سرویس‌ها بدون مشکل جدی است.
    *   **16 GB (توصیه شده):** این مقدار به دیتابیس و Redis فضای کافی برای عملکرد بهینه می‌دهد و از کندی سیستم در زمان اوج ترافیک جلوگیری می‌کند.
    *   **32+ GB:** برای مدیریت هزاران کاربر همزمان و حجم بالای داده در کش، این میزان حافظه ضروری است.

#### **Storage (فضای ذخیره‌سازی)**

*   **چرا NVMe/SSD؟** سرعت خواندن و نوشتن دیتابیس PostgreSQL گلوگاه اصلی عملکرد سیستم شماست. استفاده از حافظه‌های پرسرعت NVMe یا حداقل SSD (و نه HDD) **یک الزام است، نه یک انتخاب.**
*   **توضیح حجم:**
    *   **100 GB:** برای شروع و ذخیره دیتابیس اولیه، لاگ‌ها و فایل‌های مدیا کافی است.
    *   **250+ GB:** با توجه به آپلود فایل توسط کاربران و رشد دیتابیس، این فضا برای یک سال اول، دید بهتری به شما می‌دهد. در آینده می‌توانید از سرویس‌های Object Storage مانند S3 برای ذخیره فایل‌های مدیا استفاده کنید تا فضای دیسک سرور اصلی را آزاد نگه دارید.

#### **پهنای باند و ترافیک**

*   **چرا مهم است؟** APIها، فایل‌های مدیا و ارتباطات WebSocket همگی از پهنای باند شبکه استفاده می‌کنند.
*   **توضیح:** مقادیر تخمینی هستند و به شدت به رفتار کاربران بستگی دارند. اما با توجه به ماهیت پروژه (بازی و مسابقات آنلاین)، ترافیک بالایی قابل پیش‌بینی است.

#### **GPU (پردازنده گرافیکی)**

*   در حال حاضر هیچ‌کدام از کتابخانه‌های پروژه شما (`requirements.txt`) نیاز مستقیمی به GPU ندارند. اما وجود کتابخانه‌هایی مانند `scikit-learn` این پتانسیل را نشان می‌دهد که اگر در آینده الگوریتم‌های یادگیری ماشین (Machine Learning) به پروژه اضافه شوند، ممکن است به GPU نیاز پیدا کنید.

#### **نوع سرور و مقیاس‌پذیری**

*   **شروع (VPS/Cloud):** برای شروع، سرورهای ابری یا VPS به دلیل هزینه کمتر و راه‌اندازی سریع، بهترین گزینه هستند.
*   **رشد (Dedicated Server):** با رشد پروژه، سرورهای اختصاصی معمولاً به ازای هر دلار، منابع سخت‌افزاری بیشتری ارائه می‌دهند.
*   **مقیاس بالا (Multi-Server/Cloud Infrastructure):** معماری مبتنی بر Docker پروژه شما این امکان را می‌دهد که به راحتی به یک معماری چندسروری مهاجرت کنید:
    *   **سرور ۱:** وب اپلیکیشن (Django) و Nginx
    *   **سرور ۲:** دیتابیس PostgreSQL (Managed Database)
    *   **سرور ۳:** کلاستر Redis
    *   **سرورهای ۴, ۵, ...:** مجموعه‌ای از سرورها برای اجرای Celery Workers (Auto-scaling Group)

این ساختار به شما اجازه می‌دهد تا هر بخش را متناسب با نیازش به صورت افقی (اضافه کردن سرور) یا عمودی (ارتقای سخت‌افزار) مقیاس‌بندی کنید.