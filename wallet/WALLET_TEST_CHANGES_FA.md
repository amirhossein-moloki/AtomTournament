# توضیح تغییرات اخیر در تست‌های کیف پول

این توضیحات خلاصه‌ای از تغییراتی است که در آخرین به‌روزرسانی فایل `wallet/tests_services.py` انجام شد:

1. **پوشش کامل‌تر واریز (Deposit):**
   - سناریوهای «پرداخت از قبل تأیید شده» و «تراکنش غیرمنتظر» به تست‌ها اضافه شد تا مطمئن شویم موجودی فقط در حالت درست افزایش می‌یابد.
   - تأیید می‌شود که شماره ارجاع (refNumber) ذخیره شود و تراکنش از حالت در انتظار به موفق تغییر کند.

2. **منطق برداشت (Withdrawal):**
   - برای محاسبه صحیح کسر موجودی، قبل و بعد از ثبت برداشت، موجودی اولیه سنجیده می‌شود.
   - محدودیت حداقل برداشت و جلوگیری از ثبت برداشت جدید در ۲۴ ساعت گذشته تست و تأیید شده است.

3. **کاربرد عملی تغییرات:**
   - این تست‌ها مانع از بروز خطا در واریزهای تکراری یا تغییر اشتباه موجودی می‌شوند.
   - کنترل‌های برداشت، تجربه کاربر و انضباط مالی را با جلوگیری از برداشت‌های متعدد سریع و خطا در حداقل مبلغ، بهتر می‌کند.

هدف کلی این تغییرات، افزایش اطمینان از صحت منطق مالی کیف پول و جلوگیری از باگ‌های رایج در واریز و برداشت است.
