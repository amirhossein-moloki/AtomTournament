[pgbouncer]
; Listen on all interfaces on port 5432
listen_addr = *
listen_port = 5432

; Location of the userlist file
auth_file = /etc/pgbouncer/userlist.txt
; Use md5 for authentication, which is standard for PostgreSQL
auth_type = md5

; Log settings
admin_users = postgres
stats_users = postgres
log_connections = 1
log_disconnections = 1
log_pooler_errors = 1

; Connection pool settings
; The actual database connection string.
; pgbouncer will connect to the 'db' service on the default postgres port.
* = host=db port=5432

; Pool mode: transaction, session, or statement
; 'transaction' is the safest and most recommended mode for Django applications.
pool_mode = transaction

; Default pool size. Can be overridden per-database.
; This is the number of server connections to keep in the pool.
default_pool_size = 20

; Max number of client connections allowed to pgbouncer.
; This should be less than postgres's max_connections to leave room for other clients.
max_client_conn = 80

; Other timeouts and settings
server_reset_query = DISCARD ALL;
server_check_delay = 10
idle_transaction_timeout = 60000
